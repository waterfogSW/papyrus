---
tags:
  - Book
  - Backend
aliases:
  - 데이터 중심 애플리케이션 설계
---


모든 내용이 아닌 인상깊은 내용을 위주로 정리합니다.
## 신뢰성, 확장성, 유지보수성

**신뢰성**
- 지속적으로 올바르게 동작하게 할 수 있는 시스템
- 결함이 발생해도 시스템이 올바르게 동작하게 만든다.
**확장성**
- 데이터의 양, 트래픽의 양, 복잡도가 증가하면서 적절하게 처리할 수 있는 방법이 있는 시스템.
- 부하가 증가해도 좋은 성능을 유지하기 위한 전략
**유지보수성**
- 시스템 상에서 작업하는 모든 사용자가 생산적으로 작업할 수 있는 시스템
- 시스템 엔지니어와 운영팀의 삶을 개선하는것이 본질


### 트위터 팬아웃

![[Pasted image 20231214234927.png]]

- 첫번째 방법
	- 사용자가 자신의 홈 타임라인을 요청하면, 팔로우하는 모든 사람의 모든 트윗을 찾아 시간순으로 정렬해 합친다.
- 두번째 방법
	- 각 수신 사용자는 홈 타임라인 캐시를 유지한다. 사용자가 트윗을 작성하면 해당 사용자를 팔로우하는 사람을 모두 찾아 팔로워 각자의 홈 타임라인 캐시에 트윗을 삽입한다. 

트윗 쓰기 요청량이 트윗 읽기 요청량보다 수백배 적기에 두번째 방법이 훨씬 잘 동작한다. 하지만 두번째 방식의 단점은 하나의 쓰기 작업이 팔로워의 숫자에 따라 곱연산으로 뻥튀기 된다는 점이다.

트위터의 최종전개는 두 방식을 복합적으로 사용하는것이다. 팔로워수가 많은 유명인은 첫번째 방식으로 트윗을 공유하고, 팔로워수가 적은 일반인은 두번째 방법으로 트윗을 전달한다.


## 지연시간과 응답시간

- 특이 값은 더 많은 데이터를 처리하기에 더 비싸다. 하지만 이런 특이 값의 느린 요청을 경험하는 고객들은 많은 데이터를 갖고있는 고객 즉 가장 소중한 고객이다.(아마존)
	- 99.9분위의 경우 소중한 고객이다. 판매량과 고객의 만족도 지표에 직접적 영향을 준다.
	- 99.99분위는 통제할 수 없는 임의의 이벤트에 쉽게 영향을 받기때문에 개선으로 얻는 이점이 낮다.
- 특이값이 얼마나 좋지 않은지 살펴보기위해서 상위 백분위를 활용한다. 95분위, 99분위, 999분위가 일반적이다.(p95, p99, p999)
	- k6와 같은 부하테스트 툴을 살펴보면 p95, p99, p999와 같은 상위백분위를 보여준다.
	- 꼬리 지연 시간 = 상위 백분위 응답시간


